<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Einheiten-Umrechner fÃ¼r Kids</title>
    <!-- Prevent client-side caching where possible -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“ Einheiten-Profi ğŸ“</h1>
        </header>
        
        <section id="start-menu" class="card">
            <h2>Was mÃ¶chtest du lernen?</h2>
            <div class="topics-grid">
                <button id="btn-groessen" class="btn topic-card">GrÃ¶ssen</button>
                <button id="btn-deutsch" class="btn topic-card">Deutsch</button>
            </div>
        </section>

        <section id="settings" class="card hidden">
            <h2>Einstellungen</h2>
            <div class="control-group">
                <label for="mode">Was mÃ¶chtest du Ã¼ben?</label>
                <select id="mode">
                    <option value="distance">LÃ¤ngen (mm, cm, dm, m, km)</option>
                    <option value="area">FlÃ¤chen (mmÂ², cmÂ², dmÂ², mÂ²)</option>
                    <option value="volume">Volumen (mmÂ³, cmÂ³, dmÂ³, mÂ³)</option>
                </select>
            </div>
            <div class="control-group">
                <label for="difficulty">Schwierigkeit:</label>
                <select id="difficulty">
                    <option value="easy">Leicht (Ganze Zahlen, Nachbareinheiten)</option>
                    <option value="medium">Mittel (Einfache Kommazahlen)</option>
                    <option value="hard">Schwer (Knifflige Kommazahlen)</option>
                </select>
            </div>
            <div class="control-group button-row">
                <button id="start-btn" class="btn primary">Los geht's!</button>
                <button id="settings-back" class="btn small">ZurÃ¼ck</button>
            </div>
        </section>

        <section id="game-area" class="card hidden">
            <div class="score-board">
                <span>Punkte: <span id="score">0</span></span>
                <button id="back-btn" class="btn small">ZurÃ¼ck</button>
            </div>
            
            <div class="problem-container">
                <div class="problem">
                    <span id="value-display">100</span>
                    <span id="unit-from">cm</span>
                    <span>=</span>
                    <input type="number" id="user-input" step="any" placeholder="?">
                    <span id="unit-to">m</span>
                </div>
                <button id="check-btn" class="btn action">PrÃ¼fen</button>
            </div>

            <div id="feedback" class="feedback hidden"></div>
            <button id="next-btn" class="btn secondary hidden">NÃ¤chste Aufgabe</button>
        </section>

        <section id="deutsch" class="card hidden">
            <h2>Deutsch â€” Einstieg</h2>
            <p>WÃ¤hle aus, was du Ã¼ben mÃ¶chtest und starte die Ãœbung.</p>
            <div class="control-group">
                <label for="deutsch-mode">Was mÃ¶chtest du Ã¼ben?</label>
                <select id="deutsch-mode">
                    <option value="grammar">Grammatik</option>
                    <option value="reading">Lesen</option>
                    <option value="writing">Schreiben</option>
                </select>
            </div>
            <div class="control-group">
                <label for="deutsch-difficulty">Schwierigkeit:</label>
                <select id="deutsch-difficulty">
                    <option value="easy">Einfach</option>
                    <option value="medium">Mittel</option>
                    <option value="hard">Schwer</option>
                </select>
            </div>
            <div class="control-group">
                <button id="deutsch-start" class="btn primary">Los geht's!</button>
            </div>
            <div class="control-group">
                <button id="deutsch-back" class="btn small">ZurÃ¼ck</button>
            </div>
        </section>

        <section id="deutsch-area" class="card hidden">
            <div class="score-board">
                <span>Punkte: <span id="deutsch-score">0</span></span>
                <button id="deutsch-exit" class="btn small">ZurÃ¼ck</button>
            </div>
            <div id="deutsch-content">
                <h3 id="deutsch-title">Deutsch â€” Ãœbung</h3>
                <p id="deutsch-placeholder">Hier erscheinen spÃ¤ter die Aufgaben (z. B. Grammatik-, Lese- oder Schreibaufgaben).</p>
            </div>
        </section>
    </div>
    <!-- Cache-busting loader: appends a timestamp to CSS/JS to force fetch when updated -->
    <script>
        (function(){
            try {
                const v = Date.now();
                // update CSS link
                const css = document.querySelector('link[rel=stylesheet][href="style.css"]');
                if (css) css.href = 'style.css?v=' + v;

                // load modular scripts in order: app, math, german
                const scripts = ['app.js','math.js','src/js/modules/german-core.browser.js','german.js'];
                // Append scripts sequentially with async=false to preserve execution order
                scripts.forEach((src) => {
                    const s = document.createElement('script');
                    s.src = src + '?v=' + v;
                    s.async = false;
                    document.body.appendChild(s);
                });
            } catch (e) {
                console.error('module loader error', e);
            }
        })();
    </script>
</body>
</html>
